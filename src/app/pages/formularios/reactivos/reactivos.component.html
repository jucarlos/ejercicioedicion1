<div >
    <div class="row mt-3">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header">Formularios Reactivos</div>
  
          <div class="card-body">
            <form [formGroup]="formulario" (ngSubmit)="validar()">
              <div class="mb-2 row">
                <label class="col-md-4 col-form-label">Nombre</label>
                <div class="col-md-8">
                  <input
                    type="text"
                    class="form-control"
                    [ngClass]="{
                      'is-invalid': nombreNoValido,
                      'is-valid': nombreValido
                    }"
                    placeholder="Nombre"
                    formControlName="nombre"
                  />
                  <small class="text-danger"
                   *ngIf="nombreNoValido">
                    Error en campo nombre
                  </small>
                  <div
                    *ngIf="formulario.get('nombre').errors?.required"
                    class="invalid-feedback"
                  >
                    El nombre es necesario.
                  </div>
                  <div
                    *ngIf="formulario.get('nombre').errors?.minlength"
                    class="invalid-feedback"
                  >
                    Por lo menos
                    {{
                      formulario.get("nombre").errors?.minlength.requiredLength
                    }}
                    caracteres.
                  </div>
                </div>
              </div>
  
              <div class="mb-2 row">
                <label class="col-md-4 col-form-label">Apellido</label>
                <div class="col-md-8">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Apellidos"
                    [ngClass]="{
                      'is-invalid': apellidoNoValido,
                      'is-valid': apellidoValido
                    }"
                    formControlName="apellido"
                  />
                  <small class="text-danger" *ngIf="apellidoNoValido">
                    Error en campo apellido
                  </small>
                </div>
              </div>
  
              <div class="mb-2 row">
                <label class="col-md-4 col-form-label">email</label>
                <div class="col-md-8">
                  <input
                    type="email"
                    placeholder="Email"
                    class="form-control"
                    formControlName="correo"
                    [ngClass]="{
                      'is-invalid': correoNoValido,
                      'is-valid': correoValido
                    }"
                  />
                  <small class="text-danger" *ngIf="correoNoValido">
                    Error en el correo
                  </small>
                </div>
              </div>
  
              <div class="mb-2 row">
                <label class="col-md-4 col-form-label">Usuario</label>
                <div class="col-md-8">
                  <input
                    type="text"
                    placeholder="Introduce el nombre de usuario"
                    class="form-control"
                    formControlName="usuario"
                    [ngClass]="{
                      'is-invalid': usuarioNoValido
                    }"
                  />
  
                  <small class="text-danger" *ngIf="usuarioNoValido">
                    Usuario ya usado
                  </small>
                
                </div>
              </div>
  
  
  
              <div class="mb-2 row" formGroupName="direccion">
                  <label class="col-4 col-form-label">Dirección</label>
                  <div class="form-row col">
  
                      <div class="mb-1 col">
                          <input 
                              type="text" 
                              class="form-control"
                              placeholder="provincia"
                              formControlName="provincia"
                              [class.is-invalid]="provinciaNoValida"
                              />
                              <small class="text-danger" *ngIf="provinciaNoValida">
                                  Es necesaria la provincia
                               </small>
  
                          
                      </div>
  
                      <div class="col">
                          <input 
                              type="text" 
                              class="form-control"
                              placeholder="localidad"
                              formControlName="localidad"
                              [class.is-invalid]="localidadNoValida"/>
                              <small class="text-danger" *ngIf="localidadNoValida">
                                 Es necesaria la localidad
                              </small>
                          
                      </div>
                   
                  </div>
                </div>
  
                
  
  
  
              <div class="mb-2 row">
                <label class="col-md-4 col-form-label">Password</label>
                <div class="col-md-8">
                  <input
                    type="password"
                    placeholder="contraseña"
                    class="form-control"
                    formControlName="password1"
                    [class.is-invalid]="pass1NoValido"/>
                    
                  
                  <small class="text-danger" *ngIf="pass1NoValido">
                    La contraseña es obligatoria
                 </small>
                </div>
              </div>
  
              <div class="mb-2 row">
                <label class="col-md-4 col-form-label">Repite Password</label>
                <div class="col-md-8">
                  <input
                    type="password"
                    placeholder="repite la contraseña"
                    class="form-control"
                    formControlName="password2"
                    [class.is-invalid]="pass2NoValido"/>
                    <small class="text-danger" *ngIf="pass2NoValido">
                      La contraseña es obligatoria y tiene que ser la misma que el password
                   </small>
                </div>
              </div>
  
  
              <div class="mb-2 row" >
                  <label class="col-4 col-form-label">Lenguajes</label>
                  <div class="col">
                      <table class="table">
                          <thead class="thead-dark">
                              <tr>
                                  <th>id</th>
                                  <th>Lenguaje</th>
                                  <th>Borrar</th>
                              </tr>
                          </thead>
                          <tbody formArrayName="lenguajes">
                              <tr *ngFor="let lenguaje of lenguajes.controls; let i = index">
                                  <td>{{ i + 1 }}</td>
                                  <td>
                                      <input class="form-control" type="text"
                                      [formControlName]="i">
                                  </td>
                                  <td>
                                      <button
                                      type="button"
                                      (click)="borrarLenguaje(i)"
                                      class="btn btn-danger btn-sm">Borrar</button>
                                  </td>
                              </tr>
                          </tbody>
                      </table>
                      <button type="button"
                      (click)="agregarLenguaje()"
                      class="btn btn-primary mt-3">+ Agregar</button>
                  </div>
              </div>
  
              <div class="mb-2 row">
                <label class="col-2 col-form-label">&nbsp;</label>
                <div class="input-group col-md-8">
                  <button type="submit" class="btn btn-outline-primary">
                    Validar
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <hr />
  <pre>
      Estado del formulario: {{ formulario.valid }}
      <br>
      Status: {{ formulario.status}}
  </pre>
  <pre>
      {{ formulario.value | json }}
  </pre>